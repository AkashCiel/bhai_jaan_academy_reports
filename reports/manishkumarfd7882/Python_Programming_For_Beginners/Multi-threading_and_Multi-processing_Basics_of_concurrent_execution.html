
    <!DOCTYPE html>
    <html lang="en">
    <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Report: Multi-threading and Multi-processing**: Basics of concurrent execution.</title>
      <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
      <!-- MathJax for mathematical formula rendering -->
      <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      <script>
        window.MathJax = {
          tex: {
            inlineMath: [['$', '$'], ['\(', '\)']],
            displayMath: [['$$', '$$'], ['\[', '\]']],
            processEscapes: true,
            processEnvironments: true,
            packages: ['base', 'ams', 'noerrors', 'noundefined']
          },
          options: {
            skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
            ignoreHtmlClass: 'tex2jax_ignore',
            processHtmlClass: 'tex2jax_process'
          },
          startup: {
            pageReady: () => {
              return MathJax.startup.defaultPageReady().then(() => {
                console.log('MathJax processing completed');
              });
            }
          }
        };
      </script>
      <style>
        /* Background image from landing page */
        .report-bg {
          background-image: url('https://akashciel.github.io/bhai_jaan_academy/Bhai%20Jaan%20Academy.png');
          background-size: cover;
          background-position: center;
          background-repeat: no-repeat;
          background-attachment: fixed;
          min-height: 100vh;
        }
        
        /* Foreground content with 60% opacity */
        .foreground-content {
          background-color: rgba(255, 255, 255, 0.6) !important;
          backdrop-filter: blur(10px);
          border-radius: 12px;
          border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .report-content h2 { 
          margin-top: 2rem; 
          margin-bottom: 1rem; 
          font-size: 1.5rem; 
          font-weight: bold; 
          color: #1f2937;
          border-bottom: 2px solid rgba(229, 231, 235, 0.8);
          padding-bottom: 0.5rem;
        }
        .report-content h3 { 
          margin-top: 1.5rem; 
          margin-bottom: 0.75rem; 
          font-size: 1.25rem; 
          font-weight: bold; 
          color: #374151;
        }
        .report-content p { 
          margin-bottom: 1rem; 
          line-height: 1.6; 
          color: #1f2937;
          font-weight: 500;
        }
        .report-content ul { 
          margin-bottom: 1rem; 
          padding-left: 1.5rem; 
        }
        .report-content li { 
          margin-bottom: 0.5rem; 
          color: #1f2937;
          font-weight: 500;
        }
        .report-content hr { 
          margin: 2rem 0; 
          border: none; 
          border-top: 1px solid rgba(229, 231, 235, 0.8); 
        }
        .report-content strong { 
          color: #111827; 
          font-weight: 700; 
        }
        .report-content .link-external { 
          background: linear-gradient(135deg, #dc2626, #b91c1c);
          color: white;
          border: 2px solid #dc2626;
          border-radius: 8px;
          padding: 0.75rem 1rem;
          text-decoration: none;
          font-weight: 700;
          transition: all 0.3s ease;
          display: inline-block;
          margin: 0.75rem 0.25rem;
          box-shadow: 0 4px 6px rgba(220, 38, 38, 0.3);
          position: relative;
          overflow: hidden;
        }
        .report-content .link-external:hover { 
          transform: translateY(-3px);
          box-shadow: 0 6px 12px rgba(220, 38, 38, 0.4);
          background: linear-gradient(135deg, #b91c1c, #991b1b);
        }
        .report-content .link-external:before {
          content: "ðŸ”— ";
          margin-right: 0.5rem;
          font-size: 1.2em;
        }
        
        /* Mobile responsiveness */
        @media (max-width: 640px) {
          .report-bg {
            background-image: url('https://akashciel.github.io/bhai_jaan_academy/Bhai%20Jaan%20Academy%20Mobile.png');
            background-attachment: scroll;
          }
          
          .foreground-content {
            margin: 1rem;
            padding: 1rem;
            border-radius: 8px;
          }
          
          .report-content h2 {
            font-size: 1.25rem;
            margin-top: 1.5rem;
          }
          .report-content h3 {
            font-size: 1.1rem;
            margin-top: 1rem;
          }
          .report-content p {
            font-size: 0.95rem;
            line-height: 1.5;
          }
          .report-content ul {
            padding-left: 1rem;
          }
          .report-content li {
            font-size: 0.95rem;
          }
          .report-content .link-external {
            font-size: 0.9rem;
            word-break: break-word;
            padding: 0.4rem 0.6rem;
          }
          
          .mobile-header {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
          }
          
          .mobile-subtitle {
            font-size: 0.9rem;
            margin-bottom: 1rem;
          }
        }
        
        /* Desktop styles */
        @media (min-width: 641px) {
          .foreground-content {
            margin: 2rem auto;
            padding: 2rem;
            max-width: 800px;
          }
        }
      </style>
    </head>
    <body class="report-bg text-gray-900 p-4 sm:p-6">
      <div class="foreground-content">
        <h1 class="text-2xl font-bold mb-4 mobile-header">Multi-threading and Multi-processing**: Basics of concurrent execution.</h1>
        <p class="mb-6 text-gray-700 mobile-subtitle">Prepared for: manishkumarfd7882@gmail.com</p>
        <article class="report-content prose prose-lg tex2jax_process">
          <h1>Multi-threading and Multi-processing: Basics of Concurrent Execution</h1>
<h2>Introduction:</h2>
<p><p>As you continue your learning journey in Python programming, it is essential to grasp the concepts of <strong>multi-threading</strong> and <strong>multi-processing</strong>. These concepts build upon your understanding of functions, loops, and object-oriented programming. They allow you to write efficient and responsive applications that can perform multiple tasks simultaneously.</p></p>
<p><p>In a world where applications need to handle numerous requests or perform complex computations quickly, understanding concurrent execution is critical. Whether it's a web server handling multiple user requests or a data processing application that needs to crunch large datasets, concurrent execution techniques can significantly enhance performance. </p></p>
<p><p>In this report, we will explore the foundations of multi-threading and multi-processing, their differences, real-world applications, and future directions in the field. </p></p>
<hr />
<h2>Key Concepts:</h2>
<h3>What is Concurrency?</h3>
<p><p><strong>Concurrency</strong> is the concept of executing multiple tasks simultaneously, allowing for better resource utilization and responsiveness. It does not necessarily mean tasks are running at the same instant; rather, they can be in progress at the same time, often overlapping in execution.</p></p>
<ul>
<ul>
<li><strong>Analogy</strong>: Imagine a chef preparing dinner. Instead of cooking each dish sequentially, they can chop vegetables for one dish while the other is simmering on the stove.</li>
</ul>
</ul>
<h3>Multi-threading</h3>
<p><p><strong>Multi-threading</strong> allows a single process to manage multiple threads of execution. Threads are lightweight processes that share the same memory space but can run independently. This is particularly useful for I/O-bound tasks, such as web scraping or network requests, where the program can perform other operations while waiting for a response.</p></p>
<ul>
<ul>
<li><strong>Key Characteristics</strong>:</li>
<li><strong>Shared Memory</strong>: Threads share the same memory space, making data sharing easier but also introducing complexity due to potential data corruption.</li>
<li>
</ul>
<p><p><strong>Lightweight</strong>: Threads consume fewer resources compared to full processes, allowing for faster context switching.</p></p>
<p></li></p>
<ul>
<li>
</ul>
<p><p><strong>Example</strong>: A web browser loading multiple tabs simultaneously. Each tab can be thought of as a separate thread, allowing users to interact with one tab while another loads.</p></p>
<p></li></p>
</ul>
<h3>Multi-processing</h3>
<p><p><strong>Multi-processing</strong> involves running multiple processes, each with its own memory space. This approach is particularly advantageous for CPU-bound tasks, like heavy data computations, where the tasks can be distributed across multiple CPU cores.</p></p>
<ul>
<ul>
<li><strong>Key Characteristics</strong>:</li>
<li><strong>Separate Memory</strong>: Processes do not share memory, which eliminates the risk of data corruption but introduces the overhead of inter-process communication (IPC).</li>
<li>
</ul>
<p><p><strong>Resource Intensive</strong>: Processes are heavier than threads, requiring more memory and resources.</p></p>
<p></li></p>
<ul>
<li>
</ul>
<p><p><strong>Example</strong>: Running multiple instances of a data analysis program, each processing a different dataset concurrently.</p></p>
<p></li></p>
</ul>
<h3>Comparing Multi-threading and Multi-processing</h3>
<p><p>| Feature              | Multi-threading                     | Multi-processing                     |</p>
<p>|----------------------|-------------------------------------|--------------------------------------|</p>
<p>| Memory Space         | Shared among threads                | Separate for each process            |</p>
<p>| Overhead             | Low (lightweight)                   | High (resource-intensive)            |</p>
<p>| Best Use Case        | I/O-bound tasks                     | CPU-bound tasks                      |</p>
<p>| Complexity           | Requires careful synchronization    | Easier to manage due to isolation    |</p>
<p>| Context Switching     | Faster                             | Slower due to process overhead       |</p></p>
<hr />
<h2>Real-World Applications</h2>
<p><p>Both multi-threading and multi-processing have practical applications that significantly enhance performance and user experience. Here are some scenarios where these concepts are utilized:</p></p>
<h3>Multi-threading Applications</h3>
<p><ol></p>
<ul>
<li>
</ul>
<p><p><strong>Web Servers</strong>: Multi-threading allows servers to handle multiple requests from users simultaneously. For instance, a web server can manage concurrent user sessions, allowing for efficient resource utilization and quicker response times.</p></p>
<p></li></p>
<ul>
<li>
</ul>
<p><p><strong>GUI Applications</strong>: In graphical user interfaces, multi-threading is used to keep the interface responsive while performing background tasks, such as loading data or processing user input.</p></p>
<p></li></p>
<ul>
<li>
</ul>
<p><p><strong>Network Applications</strong>: Applications that rely on network communication, like chat applications or online games, use multi-threading to manage multiple connections simultaneously, ensuring smooth communication between users.</p></p>
<p></li></p>
<p></ol></p>
<h3>Multi-processing Applications</h3>
<p><ol></p>
<ul>
<li>
</ul>
<p><p><strong>Data Analysis</strong>: In fields like data science, multi-processing is often used to process large datasets by splitting the workload across multiple CPU cores. Libraries like <strong>Pandas</strong> and <strong>Dask</strong> utilize multi-processing to speed up data manipulation tasks.</p></p>
<p></li></p>
<ul>
<li>
</ul>
<p><p><strong>Machine Learning</strong>: Training machine learning models can be computationally intensive. Multi-processing allows for distributing the training across several CPU cores, reducing training time significantly.</p></p>
<p></li></p>
<ul>
<li>
</ul>
<p><p><strong>Image Processing</strong>: Applications that perform heavy image processing tasks, such as resizing or filtering images, can benefit from multi-processing to handle multiple images at once.</p></p>
<p></li></p>
<p></ol></p>
<hr />
<h2>Theoretical Foundations</h2>
<h3>Python's Concurrency Models</h3>
<p><p>Python provides several ways to implement concurrency, primarily through the <code>threading</code> and <code>multiprocessing</code> modules. Each module offers different functionalities tailored for threading and processing needs.</p></p>
<h4>The <code>threading</code> Module</h4>
<ul>
<ul>
<li><strong>Creating Threads</strong>: You can create threads by subclassing the <code>Thread</code> class or using the <code>Thread</code> function directly.</li>
</ul>
</ul>
<p><p>```python</p>
<p>import threading</p></p>
<p><p>def print_numbers():</p>
<p>for i in range(5):</p>
<p>print(i)</p></p>
<p><p>thread = threading.Thread(target=print_numbers)</p>
<p>thread.start()</p>
<p>thread.join()  # Wait for the thread to finish</p>
<p>```</p></p>
<ul>
<ul>
<li><strong>Synchronization</strong>: To manage shared data, Python provides synchronization primitives like <code>Locks</code>, <code>Semaphores</code>, and <code>Conditions</code>. </li>
</ul>
</ul>
<h4>The <code>multiprocessing</code> Module</h4>
<ul>
<ul>
<li><strong>Creating Processes</strong>: You can create processes using the <code>Process</code> class from the <code>multiprocessing</code> module.</li>
</ul>
</ul>
<p><p>```python</p>
<p>from multiprocessing import Process</p></p>
<p><p>def print_numbers():</p>
<p>for i in range(5):</p>
<p>print(i)</p></p>
<p><p>process = Process(target=print_numbers)</p>
<p>process.start()</p>
<p>process.join()  # Wait for the process to finish</p>
<p>```</p></p>
<ul>
<ul>
<li><strong>Inter-Process Communication (IPC)</strong>: The <code>multiprocessing</code> module provides mechanisms like <code>Queues</code>, <code>Pipes</code>, and <code>Shared Memory</code> to facilitate communication between processes.</li>
</ul>
</ul>
<h3>Choosing Between Multi-threading and Multi-processing</h3>
<p><p>The choice between multi-threading and multi-processing depends on the nature of the tasks you need to perform:</p></p>
<ul>
<ul>
<li><strong>Use Multi-threading When</strong>:</li>
<li>The tasks are I/O-bound (e.g., waiting for network responses).</li>
<li>
</ul>
<p><p>You need to maintain shared state between tasks.</p></p>
<p></li></p>
<ul>
<li>
</ul>
<p><p><strong>Use Multi-processing When</strong>:</p></p>
<p></li></p>
<ul>
<li>The tasks are CPU-bound (e.g., heavy computations).</li>
<li>You require isolation between tasks to prevent data corruption.</li>
</ul>
</ul>
<hr />
<h2>Practical Implementation Considerations</h2>
<p><p>When implementing multi-threading or multi-processing, consider the following:</p></p>
<p><ol></p>
<ul>
<li>
</ul>
<p><p><strong>Error Handling</strong>: Ensure robust error handling within threads and processes to prevent crashes. Use try-except blocks to manage exceptions gracefully.</p></p>
<p></li></p>
<ul>
<li>
</ul>
<p><p><strong>Resource Management</strong>: Be mindful of resource consumption. Over-creating threads or processes can lead to performance degradation instead of enhancement.</p></p>
<p></li></p>
<ul>
<li>
</ul>
<p><p><strong>Testing and Debugging</strong>: Testing concurrent applications can be challenging. Consider using logging and print statements judiciously to monitor behavior during execution.</p></p>
<p></li></p>
<ul>
<li>
</ul>
<p><p><strong>Performance Monitoring</strong>: Use profiling tools to identify bottlenecks in concurrent applications and optimize accordingly.</p></p>
<p></li></p>
<p></ol></p>
<hr />
<h2>Current State and Future Directions</h2>
<h3>Emerging Technologies</h3>
<p><ol></p>
<ul>
<li>
</ul>
<p><p><strong>Asynchronous Programming</strong>: With the rise of asynchronous frameworks like <strong>Asyncio</strong>, developers can handle concurrent tasks without the overhead of multi-threading and multi-processing. This model is particularly useful for I/O-bound applications.</p></p>
<p></li></p>
<ul>
<li>
</ul>
<p><p><strong>Distributed Computing</strong>: Technologies such as <strong>Apache Spark</strong> and <strong>Dask</strong> leverage multi-processing in distributed environments, allowing for massive parallel computations across clusters.</p></p>
<p></li></p>
<p></ol></p>
<h3>Research Challenges</h3>
<p><ol></p>
<ul>
<li>
</ul>
<p><p><strong>Concurrency Bugs</strong>: Identifying and resolving bugs in concurrent applications remains a significant challenge. Tools and techniques to debug concurrent programs are in constant development.</p></p>
<p></li></p>
<ul>
<li>
</ul>
<p><p><strong>Scalability</strong>: As applications grow, ensuring that multi-threading and multi-processing can scale efficiently is crucial. Research is ongoing in developing better algorithms and architectures for concurrent execution.</p></p>
<p></li></p>
<p></ol></p>
<h3>Industry Trends</h3>
<p><ol></p>
<ul>
<li>
</ul>
<p><p><strong>Cloud Computing</strong>: Cloud platforms enable dynamic scaling of resources, allowing applications to utilize multi-processing effectively without needing to manage physical hardware.</p></p>
<p></li></p>
<ul>
<li>
</ul>
<p><p><strong>Machine Learning</strong>: With the increasing demand for faster machine learning models, multi-processing is gaining traction in training complex models in parallel.</p></p>
<p></li></p>
<p></ol></p>
<hr />
<h2>Conclusion</h2>
<p><p>Understanding multi-threading and multi-processing is critical for developing efficient applications in Python. By leveraging these concepts, you can optimize your applications to handle tasks concurrently, enhancing performance and user experience.</p></p>
<p><p>As you explore these concepts further, consider implementing both multi-threading and multi-processing in your projects. Experiment with different scenarios and analyze the performance implications. </p></p>
<p><p>To deepen your understanding, you may want to explore additional resources, such as:</p></p>
<ul>
<ul>
<li><strong>Link: <a href="https://docs.python.org/3/library/threading.html">Python Official Documentation on threading</a></strong></li>
<li><strong>Link: <a href="https://docs.python.org/3/library/multiprocessing.html">Python Official Documentation on multiprocessing</a></strong></li>
<li><strong>Link: <a href="https://docs.python.org/3/library/asyncio.html">Asyncio Documentation</a></strong></li>
</ul>
</ul>
<hr />
        </article>
        
        <section id="interactive-quiz" class="mt-10 p-4 border rounded bg-white/70"></section>
        
        <footer class="mt-8 text-sm text-gray-600">
          <p>Bhai Jaan Academy &copy; 2024</p>
        </footer>
      </div>
      
      <!-- Ensure MathJax processes the content -->
      <script>
        // Wait for MathJax to load and process
        window.addEventListener('load', function() {
          if (window.MathJax) {
            MathJax.typesetPromise().then(() => {
              console.log('MathJax typesetting completed');
            }).catch((err) => {
              console.error('MathJax typesetting error:', err);
            });
          }
        });
      </script>
      
      <script>
        window.__QUIZ__ = {"questions": [{"question": "What is the primary difference between multi-threading and multi-processing?", "options": [{"id": "A", "text": "Multi-threading involves separate memory spaces, while multi-processing shares memory.", "explanation": "Incorrect. It is the opposite; multi-threading shares memory space, while multi-processing uses separate memory spaces."}, {"id": "B", "text": "Multi-threading is best for CPU-bound tasks, while multi-processing is best for I/O-bound tasks.", "explanation": "Incorrect. Multi-threading is typically better for I/O-bound tasks, whereas multi-processing is more suitable for CPU-bound tasks."}, {"id": "C", "text": "Multi-threading shares memory space among threads, while multi-processing runs separate processes with their own memory.", "explanation": "Correct. Multi-threading allows threads to share the same memory, while multi-processing runs separate processes with their own memory."}, {"id": "D", "text": "Multi-processing is faster than multi-threading for all tasks.", "explanation": "Incorrect. The speed of multi-threading versus multi-processing depends on the task type, not a blanket statement."}], "correct_answer": "C"}, {"question": "Which of the following is a characteristic of multi-processing?", "options": [{"id": "A", "text": "It is lightweight and has lower overhead than multi-threading.", "explanation": "Incorrect. Multi-processing is heavier and has higher overhead than multi-threading."}, {"id": "B", "text": "Processes do not share memory, which can prevent data corruption.", "explanation": "Correct. Processes do not share memory space, which helps avoid data corruption compared to threads."}, {"id": "C", "text": "It is primarily used for I/O-bound tasks.", "explanation": "Incorrect. Multi-processing is better suited for CPU-bound tasks, not I/O-bound tasks."}, {"id": "D", "text": "It allows for fast context switching between tasks.", "explanation": "Incorrect. Context switching in multi-processing is slower due to the overhead of switching processes."}], "correct_answer": "B"}, {"question": "In which scenario would you prefer multi-threading over multi-processing?", "options": [{"id": "A", "text": "Executing a heavy data computation task.", "explanation": "Incorrect. Heavy data computations are better suited for multi-processing due to CPU-bound nature."}, {"id": "B", "text": "Handling multiple user requests in a web application.", "explanation": "Correct. Multi-threading is ideal for handling multiple user requests simultaneously in a web application."}, {"id": "C", "text": "Processing large datasets for machine learning.", "explanation": "Incorrect. Processing large datasets is typically better with multi-processing due to its CPU-bound nature."}, {"id": "D", "text": "Performing image processing on high-resolution images.", "explanation": "Incorrect. Image processing tasks, depending on their complexity, can also benefit from multi-processing."}], "correct_answer": "B"}, {"question": "What is a potential downside of using multi-threading?", "options": [{"id": "A", "text": "Increased memory consumption.", "explanation": "Incorrect. Multi-threading is generally more memory-efficient than multi-processing."}, {"id": "B", "text": "Difficulty in managing shared data leading to bugs.", "explanation": "Correct. Managing shared data can lead to race conditions and other concurrency bugs, which are difficult to debug."}, {"id": "C", "text": "Slower execution compared to single-threading.", "explanation": "Incorrect. Multi-threading can actually speed up execution for I/O-bound tasks compared to single-threading."}, {"id": "D", "text": "It cannot be used in GUI applications.", "explanation": "Incorrect. Multi-threading is often used in GUI applications to keep the interface responsive."}], "correct_answer": "B"}, {"question": "Which Python module would you use to create multiple threads?", "options": [{"id": "A", "text": "multiprocessing", "explanation": "Incorrect. The `multiprocessing` module is used for creating multiple processes, not threads."}, {"id": "B", "text": "threading", "explanation": "Correct. The `threading` module is specifically designed for creating and managing threads in Python."}, {"id": "C", "text": "asyncio", "explanation": "Incorrect. `asyncio` is an asynchronous programming framework, not specifically for threads."}, {"id": "D", "text": "concurrent.futures", "explanation": "Incorrect. While `concurrent.futures` can manage both threads and processes, it is not the direct module for creating threads."}], "correct_answer": "B"}], "why_it_matters": "Understanding multi-threading and multi-processing is essential for developing efficient and scalable applications. These concepts not only enhance performance but also improve user experience, making them vital in modern software development. Continue exploring these topics and apply your knowledge in practical scenarios!"};
      </script>
      <script>
        document.addEventListener('DOMContentLoaded', function() {
          const quiz = window.__QUIZ__;
          if (!quiz || !quiz.questions) return;
          const container = document.getElementById('interactive-quiz');
          if (!container) return;

          const qEl = document.createElement('h2');
          qEl.className = 'text-xl font-bold mt-8 mb-4';
          qEl.textContent = 'Interactive Quiz: Test Your Understanding';
          container.appendChild(qEl);

          // Render each question
          quiz.questions.forEach((q, questionIndex) => {
            const questionContainer = document.createElement('div');
            questionContainer.className = 'mb-8 p-4 border rounded bg-gray-50';
            
            const questionTitle = document.createElement('h3');
            questionTitle.className = 'text-lg font-semibold mb-3';
            questionTitle.textContent = `Question ${questionIndex + 1}: ${q.question}`;
            questionContainer.appendChild(questionTitle);

            const form = document.createElement('form');
            form.className = 'space-y-3';
            q.options.forEach(opt => {
              const label = document.createElement('label');
              label.className = 'flex items-start gap-3 p-3 border rounded hover:bg-gray-50 cursor-pointer';
              const input = document.createElement('input');
              input.type = 'radio';
              input.name = `quizOption_${questionIndex}`;
              input.value = opt.id;
              input.className = 'mt-1';
              const span = document.createElement('span');
              span.innerHTML = `<strong>${opt.id})</strong> ${opt.text}`;
              label.appendChild(input);
              label.appendChild(span);
              form.appendChild(label);
            });

            const submit = document.createElement('button');
            submit.type = 'button';
            submit.className = 'mt-4 px-4 py-2 bg-gray-800 text-white rounded hover:bg-black';
            submit.textContent = 'Submit Answer';
            form.appendChild(submit);

            const feedback = document.createElement('div');
            feedback.className = 'mt-4';
            
            questionContainer.appendChild(form);
            questionContainer.appendChild(feedback);
            container.appendChild(questionContainer);

            function renderExplanation(selectedId, question) {
              feedback.innerHTML = '';
              const isCorrect = selectedId === question.correct_answer;
              const header = document.createElement('p');
              header.className = isCorrect ? 'text-green-700 font-bold' : 'text-red-700 font-bold';
              header.textContent = isCorrect ? 'Correct!' : 'Not quite.';
              feedback.appendChild(header);

              const list = document.createElement('ul');
              list.className = 'mt-2 list-disc pl-6';
              question.options.forEach(opt => {
                const li = document.createElement('li');
                const label = document.createElement('span');
                label.innerHTML = `<strong>Option ${opt.id}:</strong> ${opt.explanation}`;
                if (opt.id === question.correct_answer) {
                  li.className = 'text-green-800';
                } else if (opt.id === selectedId) {
                  li.className = 'text-red-800';
                }
                li.appendChild(label);
                list.appendChild(li);
              });
              feedback.appendChild(list);
            }

            submit.addEventListener('click', function() {
              const selected = questionContainer.querySelector(`input[name="quizOption_${questionIndex}"]:checked`);
              if (!selected) {
                feedback.innerHTML = '<p class="text-yellow-800">Please select an option first.</p>';
                return;
              }
              renderExplanation(selected.value, q);
            });
          });

          // Add "Why This Matters" section at the end
          if (quiz.why_it_matters) {
            const whySection = document.createElement('div');
            whySection.className = 'mt-6 p-4 bg-blue-50 border rounded';
            const whyTitle = document.createElement('h3');
            whyTitle.className = 'font-bold text-blue-800 mb-2';
            whyTitle.textContent = 'Why This Matters:';
            const whyText = document.createElement('p');
            whyText.className = 'text-blue-700';
            whyText.textContent = quiz.why_it_matters;
            whySection.appendChild(whyTitle);
            whySection.appendChild(whyText);
            container.appendChild(whySection);
          }
        });
      </script>
        
    </body>
    </html>
    